<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   <extension-point id="dataprofilerperspectives" name="Dataprofiler Perspectives" schema="schema/Dataprofilerperspectives.exsd"/>
     
     <extension
         point="org.eclipse.ui.views">
         <category
            id="org.talend.dataprofiler.view.category"
            name="Dataprofiler"/>         
      <view
            allowMultiple="false"
            category="org.talend.dataprofiler.view.category"
            class="org.talend.dataprofiler.core.ui.views.CheatSheetView"
            id="org.talend.dataprofiler.core.ui.views.CheatSheetView"
            name="Cheat Sheet">
      </view>
      <view
            allowMultiple="false"
            category="org.talend.dataprofiler.view.category"
            class="org.talend.dataprofiler.core.ui.views.DQRespositoryView"
            id="org.talend.dataprofiler.core.ui.views.DQRespositoryView"
            name="DQ Repository">
      </view>
      <view
            category="org.talend.dataprofiler.view.category"
            class="org.talend.dataprofiler.core.ui.views.GraphsView"
            id="org.talend.dataprofiler.core.ui.views.GraphsView"
            name="Graphs"/>
      <view
            allowMultiple="false"
            category="org.talend.dataprofiler.view.category"
            class="org.talend.dataprofiler.core.ui.views.QuanlityView"
            id="org.talend.dataprofiler.core.ui.views.QuanlityView"
            name="Quality Indicator">
      </view>
      
    </extension> 
    
    <extension
         point="org.eclipse.ui.navigator.viewer">
       <viewerContentBinding 
             viewerId="org.talend.dataprofiler.core.ui.views.DQRespositoryView">
          <includes>
       	      <contentExtension pattern="org.eclipse.ui.navigator.DQresourceContent" />		       	      
	         <contentExtension pattern="org.talend.dataprofiler.core.emfContent"/>
	         <contentExtension pattern="org.eclipse.ui.navigator.resources.filters.startsWithDot"/>
          </includes>
       </viewerContentBinding>
       <viewerActionBinding
             viewerId="org.talend.dataprofiler.core.ui.views.DQRespositoryView">
          <includes>
             <actionExtension pattern="org.talend.dataprofiler.core.ui.action.provider.*" />
             <actionExtension pattern="org.talend.dataprofiler.ui.OpenActionProvider" />
          </includes>
       </viewerActionBinding>  
   </extension>
   
<!-- Resource Content--> 
   <extension  
         point="org.eclipse.ui.navigator.navigatorContent">
      <actionProvider
            	class="org.talend.dataprofiler.core.ui.action.provider.NewConnectionActionProvider"
            	id="org.talend.dataprofiler.core.ui.action.provider.NewConnectionActionProvider"> 
        	<enablement> 
        			<or>
						<adapt type="org.eclipse.core.resources.IResource" />	 
						<adapt type="java.util.Collection"> 
							<count value="0" />
						</adapt>
					</or>
	         </enablement>
		</actionProvider>
      <navigatorContent
            activeByDefault="true"
            contentProvider="org.talend.dataprofiler.core.ui.views.provider.DQRepositoryViewContentProvider"
            id="org.talend.dataprofiler.core.emfContent"
            labelProvider="org.talend.dataprofiler.core.ui.views.provider.DQRepositoryViewLabelProvider"
            name="DQ EMF Content"
            priority="normal">
           <triggerPoints> 
             <or>
                <and> 
                   <instanceof value="org.eclipse.core.resources.IResource"/> 
                   <test 
                   forcePluginActivation="true" 
                   property="org.eclipse.core.resources.extension" 
                   value="prv"/> 
                </and> 
             </or>
           </triggerPoints> 
           <possibleChildren> 
              <or> 
                <instanceof value="org.eclipse.emf.ecore.resource.Resource"/>
                <instanceof value="org.eclipse.emf.ecore.EObject"/>  
              </or> 
           </possibleChildren>   
      </navigatorContent>    
      
      <navigatorContent
            name="DQ Resource"
            priority="low"
            activeByDefault="true"
			            contentProvider="org.eclipse.ui.internal.navigator.resources.workbench.ResourceExtensionContentProvider"
            			labelProvider="org.talend.dataprofiler.core.ui.views.ResourceViewLabelProvider"			
            id="org.eclipse.ui.navigator.DQresourceContent">         
         <enablement>
		         <or>         
		            <adapt type="org.eclipse.core.resources.IProject" /> 
		            <instanceof 
		                  	value="org.eclipse.core.resources.IResource" /> 
		         </or>
         </enablement> 
     </navigatorContent>
      <actionProvider
            class="org.talend.dataprofiler.core.ui.action.provider.NewAnalysisActionProvider"
            id="org.talend.dataprofiler.core.ui.action.provider.NewAnalysisActionProvider">
            <enablement> 
        			<or>
						<adapt type="org.eclipse.core.resources.IResource" />	 
						<adapt type="java.util.Collection"> 
							<count value="0" />
						</adapt>
					</or>
	         </enablement>
      </actionProvider>
      <actionProvider 
      			id="org.talend.dataprofiler.ui.OpenActionProvider"
				class="org.eclipse.ui.internal.navigator.resources.actions.OpenActionProvider">
			<enablement>
				<and>
	            <instanceof value="org.eclipse.core.resources.IFile"/>
            	<test property="org.eclipse.core.resources.name" value="*.ana"/>	            
	        </and>
			</enablement>
		</actionProvider>
      <actionProvider
            class="org.talend.dataprofiler.core.ui.action.provider.NewReportActionProvider"
            id="org.talend.dataprofiler.core.ui.action.provider.NewReportActionProvider">
         <enablement>
            <or>
               <adapt
                     type="org.eclipse.core.resources.IFolder">
               </adapt></or>
         </enablement>
      </actionProvider> 
      <actionProvider
            class="org.talend.dataprofiler.core.ui.action.provider.RunAnalysisActionProvider"
            id="org.talend.dataprofiler.core.ui.action.provider.RunAnalysisActionProvider">
         <enablement>
            <and>
	            <instanceof value="org.eclipse.core.resources.IFile"/>
            	<test property="org.eclipse.core.resources.name" value="*.ana"/>	            
	        </and>
         </enablement>
      </actionProvider> 
      <actionProvider
            class="org.talend.dataprofiler.core.ui.action.provider.DeleteResourceProvider"
            id="org.talend.dataprofiler.core.ui.action.provider.DeleteResourceProvider">
         <enablement>
            <and>
	            <instanceof value="org.eclipse.core.resources.IFile"/>
	            <or>
            	   <test property="org.eclipse.core.resources.name" value="*.ana"/>	            
            	   <test property="org.eclipse.core.resources.name" value="*.prv"/>	
            	   <test property="org.eclipse.core.resources.name" value="*.rep"/>	
            	</or>            
	        </and>
         </enablement>
      </actionProvider> 
       
  </extension>
    
      
     
     
  <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="org.talend.dataprofiler.core.ui.perspective.DataProfilingPerspective"
            id="org.talend.dataprofiler.DataProfilingPerspective"
            name="Data Profiling">
      </perspective>
   </extension>   
   
 <extension point="org.eclipse.ui.perspectiveExtensions">
  <perspectiveExtension
	targetID="org.talend.dataprofiler.DataProfilingPerspective">
    	<view id="org.talend.dataprofiler.core.ui.views.DQRespositoryView"
        	relative="org.eclipse.ui.editorss"
    		relationship="left"
    		ratio="0.45"
    		/>	
        <view id="org.talend.dataprofiler.core.ui.views.GraphsView"
             relative="org.eclipse.ui.editorss"
             relationship="bottom"
             ratio="0.4"
             />
        <view id="org.talend.dataprofiler.core.ui.views.CheatSheetView"
              relative="org.eclipse.ui.editorss"
              relationship="right"
              ratio="0.5"
              />
        <view id="org.talend.dataprofiler.core.ui.views.QuanlityView"
              relative="org.talend.dataprofiler.core.ui.views.CheatSheetView"
              relationship="bottom"
              />
  </perspectiveExtension>  
</extension>
  
   
   <extension
      point="org.talend.dataprofiler.core.dataprofilerperspectives">
        <DataprofilerPerspective
         refPerspectiveId="org.talend.dataprofiler.DataProfilingPerspective"
         dataprofilerPerspectiveName="Data Profiling"/>
        <DataprofilerPerspective
         refPerspectiveId="net.sourceforge.sqlexplorer.plugin.perspectives.SQLExplorerPluginPerspective"
         dataprofilerPerspectiveName="Data Discovery"/>
   </extension>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="org.talend.dataprofiler.core.ui.editor.AnalysisEditor"
            extensions="ana"
            icon="icons/sample.gif"
            id="org.talend.dataprofiler.core.ui.editor.AnalysisEditor"
            name="AnalysisEditor">
      </editor>
   </extension>
   
  <extension
         point="org.eclipse.ui.elementFactories">
      <factory
           class="org.talend.dataprofiler.core.ui.editor.DocumentEditorInputFactory"
            id="org.talend.dataprofiler.core.ui.editor.DocumentEditorInput">
      </factory>
   </extension>
  <extension
        point="org.eclipse.help.contexts">
     <contexts
           file="HelpContext.xml"
           plugin="org.talend.dataprofiler.core">
     </contexts>
  </extension>

</plugin>
